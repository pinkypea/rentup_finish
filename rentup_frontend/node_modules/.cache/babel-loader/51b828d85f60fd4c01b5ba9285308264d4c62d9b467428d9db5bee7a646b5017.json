{"ast":null,"code":"import _slicedToArray from\"D:/rentup/rentup_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./ChangePasswordPage.module.css\";import img from\"../../../assets/img/backgroundSignin.jpg\";import{useRef,useContext,useEffect,useState}from\"react\";import AuthContext from'../../../store/auth-context';import{Link,useHistory,useParams}from\"react-router-dom\";import{signinApi,getOauth2Info}from\"../../../api/AuthApi\";import{changePassword}from\"../../../api/AuthApi\";import Popup from\"../common/Popup/Popup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangePasswordPage=function ChangePasswordPage(){var newPasswordInputRef=useRef(\"\");var newPasswordRepeatInputRef=useRef(\"\");var _useState=useState(false),_useState2=_slicedToArray(_useState,2),popup=_useState2[0],setPopup=_useState2[1];var history=useHistory();var params=useParams();var token=params.token;var submitHandler=function submitHandler(event){event.preventDefault();var enteredNewPassword=newPasswordInputRef.current.value;var enteredNewPasswordRepeat=newPasswordRepeatInputRef.current.value;if(enteredNewPassword!==enteredNewPasswordRepeat){alert(\"Repeated password is not the same\");}changePassword(token,{new_password:enteredNewPassword}).then(function(data){setPopup(true);}).catch(function(error){return console.error(error);});};var redirectSigninPage=function redirectSigninPage(){history.replace(\"/signin\");};return/*#__PURE__*/_jsxs(\"section\",{className:classes.back,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.center,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"form\",{method:\"POST\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.txt_field,children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,ref:newPasswordInputRef}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.txt_field,children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,ref:newPasswordRepeatInputRef}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password Repeat\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.signup_link,children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"home\"})})]}),/*#__PURE__*/_jsxs(Popup,{trigger:popup,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Change password successfully\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your password has been updated\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:redirectSigninPage,children:\"Ok\"})]})]}),/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"})]});};export default ChangePasswordPage;","map":{"version":3,"names":["classes","img","useRef","useContext","useEffect","useState","AuthContext","Link","useHistory","useParams","signinApi","getOauth2Info","changePassword","Popup","ChangePasswordPage","newPasswordInputRef","newPasswordRepeatInputRef","popup","setPopup","history","params","token","submitHandler","event","preventDefault","enteredNewPassword","current","value","enteredNewPasswordRepeat","alert","new_password","then","data","catch","error","console","redirectSigninPage","replace","back","center","txt_field","signup_link"],"sources":["D:/rentup/rentup_frontend/src/core/components/ChangePasswordPage/ChangePasswordPage.js"],"sourcesContent":["import classes from \"./ChangePasswordPage.module.css\"\r\nimport img from \"../../../assets/img/backgroundSignin.jpg\"\r\nimport { useRef, useContext, useEffect, useState } from \"react\"\r\nimport AuthContext from '../../../store/auth-context';\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport { signinApi, getOauth2Info } from \"../../../api/AuthApi\";\r\nimport {changePassword} from \"../../../api/AuthApi\"\r\nimport Popup from \"../common/Popup/Popup\"\r\n\r\n\r\nconst ChangePasswordPage = () => {\r\n    const newPasswordInputRef = useRef(\"\")\r\n    const newPasswordRepeatInputRef = useRef(\"\")\r\n    \r\n    const [popup, setPopup] = useState(false)\r\n    \r\n    const history = useHistory()\r\n    \r\n    const params = useParams()\r\n    \r\n    const token = params.token\r\n    \r\n    const submitHandler = (event) => {\r\n        event.preventDefault();\r\n        \r\n        const enteredNewPassword = newPasswordInputRef.current.value;\r\n        const enteredNewPasswordRepeat = newPasswordRepeatInputRef.current.value;\r\n        \r\n        if(enteredNewPassword !== enteredNewPasswordRepeat){\r\n            alert(\"Repeated password is not the same\")\r\n        }\r\n        \r\n        changePassword(token, {new_password: enteredNewPassword})\r\n        .then((data) => {\r\n            setPopup(true)\r\n        })\r\n        .catch((error) => console.error(error))\r\n    }\r\n    \r\n    const redirectSigninPage = () => {\r\n        history.replace(\"/signin\")    \r\n    }\r\n    \r\n    return (\r\n        <section className={classes.back}>\r\n            <div className={classes.center}>\r\n                <h1>Change Password</h1>\r\n                <form method=\"POST\" onSubmit={submitHandler}>\r\n                    <div className={classes.txt_field}>\r\n                        <input type=\"password\" required ref={newPasswordInputRef}/>\r\n                        <span></span>\r\n                        <label>Password</label>\r\n                    </div>\r\n                    <div className={classes.txt_field}>\r\n                        <input type=\"password\" required ref={newPasswordRepeatInputRef}/>\r\n                        <span></span>\r\n                        <label>Password Repeat</label>\r\n                    </div>\r\n                    <button type=\"submit\">Submit</button>\r\n                    <div className={classes.signup_link}>\r\n                        <Link to=\"/\">home</Link>\r\n                    </div>\r\n                </form>\r\n                <Popup trigger={popup}>\r\n                    <h3>Change password successfully</h3>\r\n                    <p>Your password has been updated</p>\r\n                    <button type=\"button\" onClick={redirectSigninPage}>Ok</button>\r\n                </Popup>\r\n            </div>\r\n            <img src={img} alt='' />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ChangePasswordPage"],"mappings":"+GAAA,MAAOA,QAAO,KAAM,iCAAiC,CACrD,MAAOC,IAAG,KAAM,0CAA0C,CAC1D,OAASC,MAAM,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC/D,MAAOC,YAAW,KAAM,6BAA6B,CACrD,OAASC,IAAI,CAAEC,UAAU,CAAEC,SAAS,KAAQ,kBAAkB,CAC9D,OAASC,SAAS,CAAEC,aAAa,KAAQ,sBAAsB,CAC/D,OAAQC,cAAc,KAAO,sBAAsB,CACnD,MAAOC,MAAK,KAAM,uBAAuB,yFAGzC,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC7B,GAAMC,oBAAmB,CAAGb,MAAM,CAAC,EAAE,CAAC,CACtC,GAAMc,0BAAyB,CAAGd,MAAM,CAAC,EAAE,CAAC,CAE5C,cAA0BG,QAAQ,CAAC,KAAK,CAAC,wCAAlCY,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,QAAO,CAAGX,UAAU,EAAE,CAE5B,GAAMY,OAAM,CAAGX,SAAS,EAAE,CAE1B,GAAMY,MAAK,CAAGD,MAAM,CAACC,KAAK,CAE1B,GAAMC,cAAa,CAAG,QAAhBA,cAAa,CAAIC,KAAK,CAAK,CAC7BA,KAAK,CAACC,cAAc,EAAE,CAEtB,GAAMC,mBAAkB,CAAGV,mBAAmB,CAACW,OAAO,CAACC,KAAK,CAC5D,GAAMC,yBAAwB,CAAGZ,yBAAyB,CAACU,OAAO,CAACC,KAAK,CAExE,GAAGF,kBAAkB,GAAKG,wBAAwB,CAAC,CAC/CC,KAAK,CAAC,mCAAmC,CAAC,CAC9C,CAEAjB,cAAc,CAACS,KAAK,CAAE,CAACS,YAAY,CAAEL,kBAAkB,CAAC,CAAC,CACxDM,IAAI,CAAC,SAACC,IAAI,CAAK,CACZd,QAAQ,CAAC,IAAI,CAAC,CAClB,CAAC,CAAC,CACDe,KAAK,CAAC,SAACC,KAAK,QAAKC,QAAO,CAACD,KAAK,CAACA,KAAK,CAAC,GAAC,CAC3C,CAAC,CAED,GAAME,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC7BjB,OAAO,CAACkB,OAAO,CAAC,SAAS,CAAC,CAC9B,CAAC,CAED,mBACI,iBAAS,SAAS,CAAErC,OAAO,CAACsC,IAAK,wBAC7B,aAAK,SAAS,CAAEtC,OAAO,CAACuC,MAAO,wBAC3B,uCAAwB,cACxB,cAAM,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAEjB,aAAc,wBACxC,aAAK,SAAS,CAAEtB,OAAO,CAACwC,SAAU,wBAC9B,cAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,MAAC,GAAG,CAAEzB,mBAAoB,EAAE,cAC3D,eAAa,cACb,mCAAuB,GACrB,cACN,aAAK,SAAS,CAAEf,OAAO,CAACwC,SAAU,wBAC9B,cAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,MAAC,GAAG,CAAExB,yBAA0B,EAAE,cACjE,eAAa,cACb,0CAA8B,GAC5B,cACN,eAAQ,IAAI,CAAC,QAAQ,oBAAgB,cACrC,YAAK,SAAS,CAAEhB,OAAO,CAACyC,WAAY,uBAChC,KAAC,IAAI,EAAC,EAAE,CAAC,GAAG,kBAAY,EACtB,GACH,cACP,MAAC,KAAK,EAAC,OAAO,CAAExB,KAAM,wBAClB,oDAAqC,cACrC,qDAAqC,cACrC,eAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAEmB,kBAAmB,gBAAY,GAC1D,GACN,cACN,YAAK,GAAG,CAAEnC,GAAI,CAAC,GAAG,CAAC,EAAE,EAAG,GAClB,CAElB,CAAC,CAED,cAAea,mBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}