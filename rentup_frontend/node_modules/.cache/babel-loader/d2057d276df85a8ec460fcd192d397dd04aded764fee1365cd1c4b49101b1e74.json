{"ast":null,"code":"import _slicedToArray from\"D:/rentup/rentup_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./RoomCard.module.css\";import{useContext,useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{deleteRoom,postRoom,unPostRoom}from'../../../../api/RoomApi';import AuthContext from'../../../../store/auth-context';import Popup from\"../../common/Popup/Popup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RoomCard=function RoomCard(props){var authCtx=useContext(AuthContext);var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),popup=_useState2[0],setPopup=_useState2[1];var _useState3=useState('Successfully'),_useState4=_slicedToArray(_useState3,2),popupTitle=_useState4[0],setPopupTitle=_useState4[1];var _useState5=useState('Your room has been updated!'),_useState6=_slicedToArray(_useState5,2),popupDetail=_useState6[0],setPopupDetail=_useState6[1];var deleteHandler=function deleteHandler(){deleteRoom(props.item.id,authCtx.token).then(function(response){if(response.status===400){setPopupTitle(response.statusText);setPopupDetail('Some things went wrong!');}if(response.status===403){setPopupTitle('Failed');setPopupDetail('You do not have permission to perform this action!');}if(response.status===200){setPopupTitle('Edit House successfully');setPopupDetail('Your house has been updated!');}setPopup(true);}).catch(function(err){alert(err.message);});};var postHandler=function postHandler(){postRoom(props.item.id,authCtx.token).then(function(response){if(response.status===400){setPopupTitle(response.statusText);setPopupDetail('Some things went wrong!');}if(response.status===403){setPopupTitle('Failed');setPopupDetail('You do not have permission to perform this action!');}if(response.status===200){setPopupTitle('Edit House successfully');setPopupDetail('Your house has been updated!');}setPopup(true);}).catch(function(err){alert(err.message);});};var unPostHandler=function unPostHandler(){unPostRoom(props.item.id,authCtx.token).then(function(response){if(response.status===400){setPopupTitle(response.statusText);setPopupDetail('Some things went wrong!');}if(response.status===403){setPopupTitle('Failed');setPopupDetail('You do not have permission to perform this action!');}if(response.status===200){setPopupTitle('Edit House successfully');setPopupDetail('Your house has been updated!');}setPopup(true);}).catch(function(err){alert(err.message);});};var reloadPage=function reloadPage(){setPopup(false);props.reload();};return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.shadow,\" \").concat(classes.roomCard),children:[/*#__PURE__*/_jsx(\"div\",{className:classes.img,children:/*#__PURE__*/_jsx(\"img\",{src:props.item.cover,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.text,children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.category,\" \").concat(classes.flex),children:/*#__PURE__*/_jsx(\"span\",{style:{background:\"#ff98001a\",color:\"#ff9800\"},children:props.item.active?\"active\":\"inactive\"})}),/*#__PURE__*/_jsx(\"h4\",{children:props.item.category}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-info\"}),\" Info: \",props.item.detail]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-chart-area\"}),\" Area: \",props.item.area,\" m^2\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-money-check\"}),\" Rent price: \",props.item.rent_price,\"\\u0111 / month\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-money-check\"}),\" Water price: \",props.item.water_price,\"\\u0111 / month\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-money-check\"}),\" Electricity price: \",props.item.electricity_price,\"\\u0111 / month\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-money-check\"}),\" Services price: \",props.item.service_price,\"\\u0111 / month\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-money-check\"}),\" Total price: \",props.item.totalPrice,\"\\u0111 / month\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.button,\" \").concat(classes.flex),children:[!props.item.active&&/*#__PURE__*/_jsx(\"button\",{className:classes.postRoom,onClick:postHandler,children:\"Post\"}),props.item.active&&/*#__PURE__*/_jsx(\"button\",{className:classes.postRoom,onClick:unPostHandler,children:\"UnPost\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.button,\" \").concat(classes.flex),children:/*#__PURE__*/_jsx(Link,{className:classes.editRoom,to:\"/room/\".concat(props.item.id,\"/edit\"),children:\"Edit\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.button,\" \").concat(classes.flex),children:/*#__PURE__*/_jsx(\"button\",{className:classes.btn3,onClick:deleteHandler,children:\"Delete\"})}),/*#__PURE__*/_jsxs(Popup,{trigger:popup,children:[/*#__PURE__*/_jsx(\"h3\",{children:popupTitle}),/*#__PURE__*/_jsx(\"p\",{children:popupDetail}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:reloadPage,children:\"Ok\"})]})]},props.item.index);};export default RoomCard;","map":{"version":3,"names":["classes","useContext","useState","Link","useHistory","deleteRoom","postRoom","unPostRoom","AuthContext","Popup","RoomCard","props","authCtx","history","popup","setPopup","popupTitle","setPopupTitle","popupDetail","setPopupDetail","deleteHandler","item","id","token","then","response","status","statusText","catch","err","alert","message","postHandler","unPostHandler","reloadPage","reload","shadow","roomCard","img","cover","text","category","flex","background","color","active","detail","area","rent_price","water_price","electricity_price","service_price","totalPrice","button","editRoom","btn3","index"],"sources":["D:/rentup/rentup_frontend/src/core/components/ManagePage/Room/RoomCard.js"],"sourcesContent":["import classes from \"./RoomCard.module.css\"\r\nimport { useContext, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { deleteRoom, postRoom, unPostRoom } from '../../../../api/RoomApi';\r\nimport AuthContext from '../../../../store/auth-context';\r\nimport Popup from \"../../common/Popup/Popup\"\r\n\r\nconst RoomCard = props => {\r\n    const authCtx = useContext(AuthContext)\r\n    \r\n    const history = useHistory()\r\n    \r\n    const [popup, setPopup] = useState(false)\r\n    const [popupTitle, setPopupTitle] = useState('Successfully')\r\n    const [popupDetail, setPopupDetail] = useState('Your room has been updated!')\r\n    \r\n    const deleteHandler = () => {\r\n        deleteRoom(props.item.id, authCtx.token)\r\n        .then((response) => {\r\n            if(response.status === 400) {\r\n                setPopupTitle(response.statusText)\r\n                setPopupDetail('Some things went wrong!')\r\n            }\r\n            if(response.status === 403){\r\n                setPopupTitle('Failed')\r\n                setPopupDetail('You do not have permission to perform this action!')\r\n            }\r\n            if(response.status === 200){\r\n                setPopupTitle('Edit House successfully')\r\n                setPopupDetail('Your house has been updated!')\r\n            }\r\n            setPopup(true)\r\n        })\r\n        .catch((err) => {\r\n            alert(err.message);\r\n        });\r\n    }\r\n    \r\n    const postHandler = () => {\r\n        postRoom(props.item.id, authCtx.token)\r\n        .then((response) => {\r\n            if(response.status === 400) {\r\n                setPopupTitle(response.statusText)\r\n                setPopupDetail('Some things went wrong!')\r\n            }\r\n            if(response.status === 403){\r\n                setPopupTitle('Failed')\r\n                setPopupDetail('You do not have permission to perform this action!')\r\n            }\r\n            if(response.status === 200){\r\n                setPopupTitle('Edit House successfully')\r\n                setPopupDetail('Your house has been updated!')\r\n            }\r\n            setPopup(true)\r\n        })\r\n        .catch((err) => {\r\n            alert(err.message);\r\n        });\r\n    }\r\n    \r\n    const unPostHandler = () => {\r\n        unPostRoom(props.item.id, authCtx.token)\r\n        .then((response) => {\r\n            if(response.status === 400) {\r\n                setPopupTitle(response.statusText)\r\n                setPopupDetail('Some things went wrong!')\r\n            }\r\n            if(response.status === 403){\r\n                setPopupTitle('Failed')\r\n                setPopupDetail('You do not have permission to perform this action!')\r\n            }\r\n            if(response.status === 200){\r\n                setPopupTitle('Edit House successfully')\r\n                setPopupDetail('Your house has been updated!')\r\n            }\r\n            setPopup(true)\r\n        })\r\n        .catch((err) => {\r\n            alert(err.message);\r\n        });\r\n    }\r\n    \r\n    const reloadPage = () => {\r\n        setPopup(false)\r\n        props.reload()\r\n    }\r\n    \r\n    return (\r\n        <div className={`${classes.shadow} ${classes.roomCard}`} key={props.item.index}>\r\n            <div className={classes.img}>\r\n                <img src={props.item.cover} alt='' />\r\n            </div>\r\n            <div className={classes.text}>\r\n                <div className={`${classes.category} ${classes.flex}`}>\r\n                    <span style={{ background: \"#ff98001a\", color: \"#ff9800\" }}>{props.item.active ? \"active\" : \"inactive\"}</span>\r\n                </div>\r\n                <h4>{props.item.category}</h4>\r\n                <p>\r\n                    <i class=\"fa fa-info\"></i> Info: {props.item.detail}\r\n                </p>\r\n                <p>\r\n                    <i class=\"fa fa-chart-area\"></i> Area: {props.item.area} m^2\r\n                </p>\r\n                <p>\r\n                    <i class=\"fa fa-money-check\"></i> Rent price: {props.item.rent_price}đ / month\r\n                </p>\r\n                <p>\r\n                    <i class=\"fa fa-money-check\"></i> Water price: {props.item.water_price}đ / month\r\n                </p>\r\n                <p>\r\n                    <i class=\"fa fa-money-check\"></i> Electricity price: {props.item.electricity_price}đ / month\r\n                </p>\r\n                <p>\r\n                    <i class=\"fa fa-money-check\"></i> Services price: {props.item.service_price}đ / month\r\n                </p>\r\n                <p>\r\n                    <i class=\"fa fa-money-check\"></i> Total price: {props.item.totalPrice}đ / month\r\n                </p>\r\n            </div>\r\n            <div className={`${classes.button} ${classes.flex}`}>\r\n                {!props.item.active && <button className={classes.postRoom} onClick={postHandler}>Post</button>}\r\n                {props.item.active && <button className={classes.postRoom} onClick={unPostHandler}>UnPost</button>}\r\n                \r\n            </div>\r\n            <div className={`${classes.button} ${classes.flex}`}>\r\n                <Link className={classes.editRoom} to={`/room/${props.item.id}/edit`}>Edit</Link>\r\n            </div>\r\n            <div className={`${classes.button} ${classes.flex}`}>\r\n                <button className={classes.btn3} onClick={deleteHandler}>Delete</button>\r\n            </div>\r\n            <Popup trigger={popup}>\r\n                <h3>{popupTitle}</h3>\r\n                <p>{popupDetail}</p>\r\n                <button type=\"button\" onClick={reloadPage}>Ok</button>\r\n            </Popup>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RoomCard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}