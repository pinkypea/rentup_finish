{"ast":null,"code":"import _slicedToArray from\"D:/rentup/rentup_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Back from\"../../common/Back/Back\";import img from\"../../../../assets/img/backgroundPost.jpg\";import classes from\"./RentRequest.module.css\";import RentRequestCard from\"./RentRequestCard\";import{useState,useEffect,useContext}from\"react\";import AuthContext from'../../../../store/auth-context';import{getAllRentRequestFromLandlord}from\"../../../../api/RentRequestApi\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RentRequest=function RentRequest(){var authCtx=useContext(AuthContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),requests=_useState2[0],setRequests=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),nextLink=_useState4[0],setNextLink=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),prevLink=_useState6[0],setPrevLink=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),reload=_useState8[0],setReload=_useState8[1];var toggleReload=function toggleReload(){setReload(function(preState){return!preState;});};useEffect(function(){getAllRentRequestFromLandlord(authCtx.token).then(function(data){var tempData=[];data.results.forEach(function(item){tempData.push({room:{room_id:item.room.id,room_name:item.room.name,cover:item.room.image,category:item.room.category.name,city:item.room.house.city,district:item.room.house.district,ward:item.room.house.ward,totalPrice:item.room.totalPrice},tenant:{name:item.tenant.username,cover:item.tenant.image,address:item.tenant.city+' - '+item.tenant.district+' - '+item.tenant.ward,linkfb:item.tenant.linkfb,linkin:item.tenant.linkin,linktw:item.tenant.linktw,linkli:item.tenant.linkli},message:item.message,id:item.id});});setRequests(tempData);setNextLink(data.next);setPrevLink(data.previous);}).catch(function(err){alert(err.message);});},[reload]);var handlePagination=function handlePagination(url){try{axios.get(url,{headers:{\"Authorization\":\"Bearer \".concat(authCtx.token)}}).then(function(response){var temp=[];response.data.results.forEach(function(item){temp.push({room:{room_id:item.room.id,room_name:item.room.name,cover:item.room.image,category:item.room.category.name,city:item.room.house.city,district:item.room.house.district,ward:item.room.house.ward,totalPrice:item.room.totalPrice},tenant:{name:item.tenant.username,cover:item.tenant.image,address:item.tenant.city+' - '+item.tenant.district+' - '+item.tenant.ward,linkfb:item.tenant.linkfb,linkin:item.tenant.linkin,linktw:item.tenant.linktw,linkli:item.tenant.linkli,phone:item.tenant.phone},message:item.message,id:item.id});});setRequests(temp);setNextLink(response.data.next);setPrevLink(response.data.previous);});}catch(e){console.log(e);}};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(Back,{name:\"Rent Request\",title:\"Your Rent Request\",cover:img}),/*#__PURE__*/_jsx(\"section\",{className:\"\".concat(classes.recent,\" \").concat(classes.padding),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.grid1,\" \").concat(classes.mtop),children:requests.map(function(item,index){return/*#__PURE__*/_jsx(RentRequestCard,{item:item,index:index,reload:toggleReload});})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paginations,children:[prevLink&&/*#__PURE__*/_jsx(\"button\",{className:classes.previous,onClick:function onClick(){return handlePagination(prevLink);},children:\"Previous\"}),nextLink&&/*#__PURE__*/_jsx(\"button\",{className:classes.next,onClick:function onClick(){return handlePagination(nextLink);},children:\"Next\"})]})]})})]});};export default RentRequest;","map":{"version":3,"names":["Back","img","classes","RentRequestCard","useState","useEffect","useContext","AuthContext","getAllRentRequestFromLandlord","axios","RentRequest","authCtx","requests","setRequests","nextLink","setNextLink","prevLink","setPrevLink","reload","setReload","toggleReload","preState","token","then","data","tempData","results","forEach","item","push","room","room_id","id","room_name","name","cover","image","category","city","house","district","ward","totalPrice","tenant","username","address","linkfb","linkin","linktw","linkli","message","next","previous","catch","err","alert","handlePagination","url","get","headers","response","temp","phone","e","console","log","recent","padding","container","grid1","mtop","map","index","paginations"],"sources":["D:/rentup/rentup_frontend/src/core/components/ManagePage/RentRequest/RentRequest.js"],"sourcesContent":["import Back from \"../../common/Back/Back\"\r\nimport img from \"../../../../assets/img/backgroundPost.jpg\"\r\nimport classes from \"./RentRequest.module.css\"\r\nimport RentRequestCard from \"./RentRequestCard\"\r\nimport { useState, useEffect, useContext } from \"react\"\r\nimport AuthContext from '../../../../store/auth-context';\r\nimport {getAllRentRequestFromLandlord} from \"../../../../api/RentRequestApi\"\r\nimport axios from \"axios\"\r\n\r\nconst RentRequest = () => {\r\n    const authCtx = useContext(AuthContext)\r\n    \r\n    const [requests, setRequests] = useState([])\r\n    const [nextLink, setNextLink] = useState()\r\n    const [prevLink, setPrevLink] = useState()\r\n    \r\n    const [reload, setReload] = useState(false)\r\n    \r\n    const toggleReload = () => {\r\n        setReload(preState => !preState)\r\n    }\r\n    \r\n    useEffect(() => {\r\n        getAllRentRequestFromLandlord(authCtx.token)\r\n        .then((data) => {\r\n            const tempData = []\r\n            data.results.forEach(item => {\r\n                tempData.push({\r\n                    room: {\r\n                        room_id: item.room.id,\r\n                        room_name: item.room.name,\r\n                        cover: item.room.image,\r\n                        category: item.room.category.name,\r\n                        city: item.room.house.city,\r\n                        district: item.room.house.district,\r\n                        ward: item.room.house.ward,\r\n                        totalPrice: item.room.totalPrice\r\n                    },\r\n                    tenant: {\r\n                        name: item.tenant.username,\r\n                        cover: item.tenant.image,\r\n                        address: item.tenant.city + ' - ' + item.tenant.district + ' - ' + item.tenant.ward,\r\n                        linkfb: item.tenant.linkfb,\r\n                        linkin: item.tenant.linkin,\r\n                        linktw: item.tenant.linktw,\r\n                        linkli: item.tenant.linkli,\r\n                    },\r\n                    message: item.message,\r\n                    id: item.id\r\n                })\r\n            })\r\n            setRequests(tempData)\r\n            setNextLink(data.next)\r\n            setPrevLink(data.previous)\r\n        })\r\n        .catch((err) => {\r\n                alert(err.message);\r\n        });\r\n    }, [reload])\r\n    \r\n    const handlePagination = (url) => {\r\n        try{\r\n            axios.get(url, {\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${authCtx.token}`\r\n                }\r\n            })\r\n            .then((response) =>{\r\n                const temp = []\r\n                response.data.results.forEach(item => {\r\n                    temp.push({\r\n                        room: {\r\n                            room_id: item.room.id,\r\n                            room_name: item.room.name,\r\n                            cover: item.room.image,\r\n                            category: item.room.category.name,\r\n                            city: item.room.house.city,\r\n                            district: item.room.house.district,\r\n                            ward: item.room.house.ward,\r\n                            totalPrice: item.room.totalPrice\r\n                        },\r\n                        tenant: {\r\n                            name: item.tenant.username,\r\n                            cover: item.tenant.image,\r\n                            address: item.tenant.city + ' - ' + item.tenant.district + ' - ' + item.tenant.ward,\r\n                            linkfb: item.tenant.linkfb,\r\n                            linkin: item.tenant.linkin,\r\n                            linktw: item.tenant.linktw,\r\n                            linkli: item.tenant.linkli,\r\n                            phone: item.tenant.phone,\r\n                        },\r\n                        message: item.message,\r\n                        id: item.id\r\n                    })\r\n                })\r\n                setRequests(temp)\r\n                setNextLink(response.data.next)\r\n                setPrevLink(response.data.previous)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n  \r\n    return (\r\n        <section>\r\n            <Back name='Rent Request' title='Your Rent Request' cover={img}/>\r\n            <section className={`${classes.recent} ${classes.padding}`}>\r\n                <div className={classes.container}>\r\n                    <div className={`${classes.grid1} ${classes.mtop}`}>\r\n                        {requests.map((item, index) => <RentRequestCard item={item} index={index} reload={toggleReload}/>)}\r\n                    </div>\r\n                    <div className={classes.paginations}>\r\n                        {prevLink && <button className={classes.previous} onClick={()=>handlePagination(prevLink)}>Previous</button>}\r\n                        {nextLink && <button className={classes.next} onClick={()=>handlePagination(nextLink)}>Next</button>}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default RentRequest;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}