{"ast":null,"code":"import _slicedToArray from\"D:/rentup/rentup_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Back from\"../../common/Back/Back\";import img from\"../../../../assets/img/backgroundPost.jpg\";import classes from\"./ManageHouse.module.css\";import HouseCard from\"./HouseCard\";import{useState,useEffect,useContext}from\"react\";import AuthContext from'../../../../store/auth-context';import{getOwnedHouseApi}from\"../../../../api/HouseApi\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ManagerHouse=function ManagerHouse(){var authCtx=useContext(AuthContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),houses=_useState2[0],setHouses=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),nextLink=_useState4[0],setNextLink=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),prevLink=_useState6[0],setPrevLink=_useState6[1];useEffect(function(){getOwnedHouseApi(authCtx.token).then(function(data){var tempData=[];data.results.forEach(function(item){tempData.push({id:item.id,cover:item.image,location:\"\".concat(item.city,\" - \").concat(item.district,\" - \").concat(item.ward),category:item.category.name});});setHouses(tempData);setNextLink(data.next);setPrevLink(data.previous);}).catch(function(err){alert(err.message);});},[]);var handlePagination=function handlePagination(url){try{axios.get(url,{headers:{\"Authorization\":\"Bearer \".concat(authCtx.token)}}).then(function(response){var temp=[];response.data.results.forEach(function(item){temp.push({id:item.id,cover:item.image,location:\"\".concat(item.city,\" - \").concat(item.district,\" - \").concat(item.ward),category:item.category.name});});setHouses(temp);setNextLink(response.data.next);setPrevLink(response.data.previous);});}catch(e){console.log(e);}};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(Back,{name:\"House\",title:\"House Grid - Our Houses\",cover:img,path:\"/add-house\",action:\"Add House\"}),/*#__PURE__*/_jsx(\"section\",{className:\"\".concat(classes.recent,\" \").concat(classes.padding),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.grid3,\" \").concat(classes.mtop),children:houses.map(function(item,index){return/*#__PURE__*/_jsx(HouseCard,{item:item,index:index});})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paginations,children:[prevLink&&/*#__PURE__*/_jsx(\"button\",{className:classes.previous,onClick:function onClick(){return handlePagination(prevLink);},children:\"Previous\"}),nextLink&&/*#__PURE__*/_jsx(\"button\",{className:classes.next,onClick:function onClick(){return handlePagination(nextLink);},children:\"Next\"})]})]})})]});};export default ManagerHouse;","map":{"version":3,"names":["Back","img","classes","HouseCard","useState","useEffect","useContext","AuthContext","getOwnedHouseApi","axios","ManagerHouse","authCtx","houses","setHouses","nextLink","setNextLink","prevLink","setPrevLink","token","then","data","tempData","results","forEach","item","push","id","cover","image","location","city","district","ward","category","name","next","previous","catch","err","alert","message","handlePagination","url","get","headers","response","temp","e","console","log","recent","padding","container","grid3","mtop","map","index","paginations"],"sources":["D:/rentup/rentup_frontend/src/core/components/ManagePage/House/ManageHouse.js"],"sourcesContent":["import Back from \"../../common/Back/Back\"\r\nimport img from \"../../../../assets/img/backgroundPost.jpg\"\r\nimport classes from \"./ManageHouse.module.css\"\r\nimport HouseCard from \"./HouseCard\"\r\nimport { useState, useEffect, useContext } from \"react\"\r\nimport AuthContext from '../../../../store/auth-context';\r\nimport {getOwnedHouseApi} from \"../../../../api/HouseApi\"\r\nimport axios from \"axios\"\r\n\r\nconst ManagerHouse = () => {\r\n    const authCtx = useContext(AuthContext)\r\n    \r\n    const [houses, setHouses] = useState([])\r\n    const [nextLink, setNextLink] = useState()\r\n    const [prevLink, setPrevLink] = useState()\r\n    \r\n    useEffect(() => {\r\n        getOwnedHouseApi(authCtx.token)\r\n        .then((data) => {\r\n            const tempData = []\r\n            data.results.forEach(item => {\r\n                tempData.push({\r\n                    id: item.id,\r\n                    cover: item.image,\r\n                    location: `${item.city} - ${item.district} - ${item.ward}`,\r\n                    category: item.category.name,\r\n                })\r\n            })\r\n            setHouses(tempData)\r\n            setNextLink(data.next)\r\n            setPrevLink(data.previous)\r\n        })\r\n        .catch((err) => {\r\n                alert(err.message);\r\n        });\r\n    }, [])\r\n    \r\n    const handlePagination = (url) => {\r\n        try{\r\n            axios.get(url, {\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${authCtx.token}`\r\n                }\r\n            })\r\n            .then((response) =>{\r\n                const temp = []\r\n                response.data.results.forEach(item => {\r\n                    temp.push({\r\n                        id: item.id,\r\n                        cover: item.image,\r\n                        location: `${item.city} - ${item.district} - ${item.ward}`,\r\n                        category: item.category.name,\r\n                    })\r\n                })\r\n                setHouses(temp)\r\n                setNextLink(response.data.next)\r\n                setPrevLink(response.data.previous)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n  \r\n  \r\n    return (\r\n        <section>\r\n            <Back name='House' title='House Grid - Our Houses' cover={img} path=\"/add-house\" action=\"Add House\"/>\r\n            <section className={`${classes.recent} ${classes.padding}`}>\r\n                <div className={classes.container}>\r\n                    <div className={`${classes.grid3} ${classes.mtop}`}>\r\n                        {houses.map((item, index) => <HouseCard item={item} index={index}/>)}\r\n                    </div>\r\n                    <div className={classes.paginations}>\r\n                        {prevLink && <button className={classes.previous} onClick={()=>handlePagination(prevLink)}>Previous</button>}\r\n                        {nextLink && <button className={classes.next} onClick={()=>handlePagination(nextLink)}>Next</button>}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ManagerHouse;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}