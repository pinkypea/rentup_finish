{"ast":null,"code":"import _slicedToArray from\"D:/rentup/rentup_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import{useParams}from'react-router-dom';import{getRoomListOfHouse}from\"../../../../api/RoomApi\";import img from\"../../../../assets/img/backgroundPost.jpg\";import AuthContext from'../../../../store/auth-context';import Back from\"../../common/Back/Back\";import classes from\"./ManageRoom.module.css\";import RoomCard from\"./RoomCard\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ManagerRoom=function ManagerRoom(){var params=useParams();var id=params.id;var authCtx=useContext(AuthContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),nextLink=_useState4[0],setNextLink=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),prevLink=_useState6[0],setPrevLink=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),reload=_useState8[0],setReload=_useState8[1];var toggleReload=function toggleReload(){setReload(function(preState){return!preState;});};useEffect(function(){getRoomListOfHouse(id,authCtx.token).then(function(data){var tempData=[];data.results.forEach(function(item){tempData.push({id:item.id,cover:item.image,location:\"\".concat(item.city,\" - \").concat(item.district,\" - \").concat(item.ward),category:item.category.name,status:item.status,active:item.active,detail:item.detail,area:item.area,rent_price:item.rentPrice,water_price:item.waterPrice,electricity_price:item.electricPrice,service_price:item.servicePrice,totalPrice:item.totalPrice});});setRooms(tempData);setNextLink(data.next);setPrevLink(data.previous);}).catch(function(err){alert(err.message);});},[reload]);var handlePagination=function handlePagination(url){try{axios.get(url,{headers:{\"Authorization\":\"Bearer \".concat(authCtx.token)}}).then(function(response){var temp=[];response.data.results.forEach(function(item){temp.push({id:item.id,cover:item.image,location:\"\".concat(item.city,\" - \").concat(item.district,\" - \").concat(item.ward),category:item.category.name,status:item.status,active:item.active,detail:item.detail,area:item.area,rent_price:item.rentPrice,water_price:item.waterPrice,electricity_price:item.electricPrice,service_price:item.servicePrice,totalPrice:item.totalPrice});});setRooms(temp);setNextLink(response.data.next);setPrevLink(response.data.previous);});}catch(e){console.log(e);}};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(Back,{name:\"Room\",title:\"Room Grid - Our Rooms\",cover:img}),/*#__PURE__*/_jsx(\"section\",{className:\"\".concat(classes.recent,\" \").concat(classes.padding),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.grid3,\" \").concat(classes.mtop),children:rooms.map(function(item,index){return/*#__PURE__*/_jsx(RoomCard,{item:item,index:index,reload:toggleReload});})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paginations,children:[prevLink&&/*#__PURE__*/_jsx(\"button\",{className:classes.previous,onClick:function onClick(){return handlePagination(prevLink);},children:\"Previous\"}),nextLink&&/*#__PURE__*/_jsx(\"button\",{className:classes.next,onClick:function onClick(){return handlePagination(nextLink);},children:\"Next\"})]})]})})]});};export default ManagerRoom;","map":{"version":3,"names":["useContext","useEffect","useState","useParams","getRoomListOfHouse","img","AuthContext","Back","classes","RoomCard","axios","ManagerRoom","params","id","authCtx","rooms","setRooms","nextLink","setNextLink","prevLink","setPrevLink","reload","setReload","toggleReload","preState","token","then","data","tempData","results","forEach","item","push","cover","image","location","city","district","ward","category","name","status","active","detail","area","rent_price","rentPrice","water_price","waterPrice","electricity_price","electricPrice","service_price","servicePrice","totalPrice","next","previous","catch","err","alert","message","handlePagination","url","get","headers","response","temp","e","console","log","recent","padding","container","grid3","mtop","map","index","paginations"],"sources":["D:/rentup/rentup_frontend/src/core/components/ManagePage/Room/ManageRoom.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { getRoomListOfHouse } from \"../../../../api/RoomApi\";\r\nimport img from \"../../../../assets/img/backgroundPost.jpg\";\r\nimport AuthContext from '../../../../store/auth-context';\r\nimport Back from \"../../common/Back/Back\";\r\nimport classes from \"./ManageRoom.module.css\";\r\nimport RoomCard from \"./RoomCard\";\r\nimport axios from \"axios\"\r\n\r\nconst ManagerRoom = () => {\r\n    const params = useParams()\r\n\r\n    const id = params.id\r\n    \r\n    const authCtx = useContext(AuthContext)\r\n    \r\n    const [rooms, setRooms] = useState([])\r\n    const [nextLink, setNextLink] = useState()\r\n    const [prevLink, setPrevLink] = useState()\r\n    \r\n    const [reload, setReload] = useState(false)\r\n    \r\n    const toggleReload = () => {\r\n        setReload(preState => !preState)\r\n    }\r\n    \r\n    useEffect(() => {\r\n        getRoomListOfHouse(id, authCtx.token)\r\n        .then((data) => {\r\n            const tempData = []\r\n            data.results.forEach(item => {\r\n                tempData.push({\r\n                    id: item.id,\r\n                    cover: item.image,\r\n                    location: `${item.city} - ${item.district} - ${item.ward}`,\r\n                    category: item.category.name,\r\n                    status: item.status,\r\n                    active: item.active,\r\n                    detail: item.detail,\r\n                    area: item.area,\r\n                    rent_price: item.rentPrice,\r\n                    water_price: item.waterPrice,\r\n                    electricity_price: item.electricPrice,\r\n                    service_price: item.servicePrice,\r\n                    totalPrice: item.totalPrice,\r\n                })\r\n            })\r\n            setRooms(tempData)\r\n            setNextLink(data.next)\r\n            setPrevLink(data.previous)\r\n        })\r\n        .catch((err) => {\r\n                alert(err.message);\r\n        });\r\n    }, [reload])\r\n    \r\n    const handlePagination = (url) => {\r\n        try{\r\n            axios.get(url, {\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${authCtx.token}`\r\n                }\r\n            })\r\n            .then((response) =>{\r\n                const temp = []\r\n                response.data.results.forEach(item => {\r\n                    temp.push({\r\n                        id: item.id,\r\n                        cover: item.image,\r\n                        location: `${item.city} - ${item.district} - ${item.ward}`,\r\n                        category: item.category.name,\r\n                        status: item.status,\r\n                        active: item.active,\r\n                        detail: item.detail,\r\n                        area: item.area,\r\n                        rent_price: item.rentPrice,\r\n                        water_price: item.waterPrice,\r\n                        electricity_price: item.electricPrice,\r\n                        service_price: item.servicePrice,\r\n                        totalPrice: item.totalPrice,\r\n                    })\r\n                })\r\n                setRooms(temp)\r\n                setNextLink(response.data.next)\r\n                setPrevLink(response.data.previous)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n  \r\n    return (\r\n        <section>\r\n            <Back name='Room' title='Room Grid - Our Rooms' cover={img}/>\r\n            <section className={`${classes.recent} ${classes.padding}`}>\r\n                <div className={classes.container}>\r\n                    <div className={`${classes.grid3} ${classes.mtop}`}>\r\n                        {rooms.map((item, index) => <RoomCard item={item} index={index} reload={toggleReload}/>)}\r\n                    </div>\r\n                    <div className={classes.paginations}>\r\n                        {prevLink && <button className={classes.previous} onClick={()=>handlePagination(prevLink)}>Previous</button>}\r\n                        {nextLink && <button className={classes.next} onClick={()=>handlePagination(nextLink)}>Next</button>}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ManagerRoom;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}